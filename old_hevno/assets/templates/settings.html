<!-- assets/templates/settings.html -->
<div class="extension_settings">
    <div class="inline-drawer">
        <!-- 抽屉的标题，点击这里可以展开/折叠 -->
        <div class="inline-drawer-toggle inline-drawer-header">
            <span>Hevno Plugin</span>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>

        <!-- 我们的设置内容放在这里，默认是隐藏的 -->
        <div class="inline-drawer-content">
            <div class="Hevno_settings_inner_container">
                <!-- 原有设置 -->
                <div class="Hevno-setting-item">
                    <div class="name">Enable Plugin</div>
                    <div class="checkbox_outer">
                        <input id="Hevno_enabled_switch" type="checkbox" class="Hevno-checkbox">
                        <label for="Hevno_enabled_switch"></label>
                    </div>
                </div>

                <div class="Hevno-setting-item">
                    <div class="name">Demo String (Legacy)</div>
                    <input id="Hevno_demo_string_input" type="text" class="text_pole"
                        placeholder="This is no longer used by the orchestrator">
                </div>

                <hr>

                <!-- 【新增】管线管理部分 -->
                <div class="Hevno-setting-section-header">Pipeline Management</div>
                <div class="Hevno-setting-item description">
                    <p>Import or export your modular generation pipeline. Pipelines are stored as JSON files. The
                        currently active pipeline is saved automatically with your extension settings.</p>
                </div>

                <div class="Hevno-setting-item">
                    <button id="hevno_export_pipeline_btn" class="menu_button">Export Current Pipeline</button>
                    <button id="hevno_import_pipeline_btn" class="menu_button">Import Pipeline from File</button>
                </div>

                <!-- 【新增】隐藏的文件输入框，用于触发文件选择对话框 -->
                <input type="file" id="hevno_pipeline_file_input" accept=".json" style="display: none;">

                <div class="Hevno-setting-section-header">API Key Management</div>
                <div class="Hevno-setting-item description">
                    <p>Manage API keys for different providers. Keys are stored locally and are never sent anywhere
                        except to the respective API endpoints.</p>
                </div>

                <div class="Hevno-setting-item">
                    <div class="name">Google Gemini API Keys</div>
                </div>
                <div class="Hevno-setting-item description">
                    <p>Enter one API key per line. The plugin will rotate through these keys to balance load.</p>
                </div>
                <textarea id="hevno_gemini_keys_textarea" class="text_pole" rows="5"
                    placeholder="Enter Gemini API Key 1...\nEnter Gemini API Key 2..."></textarea>
            </div>
        </div>
    </div>
</div>

<!-- 样式部分也做一些调整 -->
<style>
    .Hevno_settings_inner_container {
        padding: 10px;
    }

    .Hevno-setting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        gap: 10px;
        /* 增加元素间距 */
    }

    .Hevno-setting-item .name {
        font-weight: bold;
    }

    .Hevno-setting-item .description p {
        width: 100%;
        /* 让描述文本占满宽度 */
        font-size: 0.9em;
        color: var(--text_secondary);
        margin-top: 0;
        margin-bottom: 5px;
    }

    .Hevno-checkbox {
        margin: 0;
    }

    .Hevno-setting-section-header {
        font-weight: bold;
        font-size: 1.1em;
        margin-top: 15px;
        margin-bottom: 5px;
        border-bottom: 1px solid var(--border-color);
        padding-bottom: 5px;
    }
</style>